/* ------------------------------------------------------------------
   TARDIS – print-exo.css
   Usage: injecté par Playwright pour générer les PDF d'exercices.
   Objectifs:
   - fond blanc, pas de chrome Sphinx
   - marges gérées par @page dans le script (25mm)
   - typographie sobre et lisible
   - zones de réponse & QCM imprimables
   ------------------------------------------------------------------ */

@media print {

  /* ---- Base document ------------------------------------------------ */

  html, body {
    margin: 0 !important;
    padding: 0 !important;
    background: #ffffff !important;
    color: #111111;
    font-family: Arial;
    font-size: 11pt;
    line-height: 1.4;
  }

  /* ---- Nettoyage layout Sphinx RTD ---------------------------------- */

  .wy-nav-side,
  .wy-side-scroll,
  .wy-nav-top,
  .wy-breadcrumbs,
  .wy-footer,
  .sphinxsidebar,
  .sphinxsidebarwrapper,
  .related,
  .rst-footer-buttons,
  div[role="navigation"][aria-label="Page navigation"] {
    display: none !important;
  }

  .wy-grid-for-nav {
    margin: 0 !important;
  }

  .wy-nav-content-wrap {
    margin: 0 !important;
  }

  .wy-nav-content {
    margin: 0 !important;
    padding: 0 !important;
    max-width: none !important;
    background: #ffffff !important;
  }

  .document,
  .rst-content,
  main,
  section {
    margin: 0 !important;
    padding: 0 !important;
    background: #ffffff !important;
    box-shadow: none !important;
  }

  /* ---- Typo générale ------------------------------------------------ */

  .rst-content {
    font-size: 11pt;
    line-height: 1.45;
  }

  .rst-content p {
    margin: 0 0 0.6em 0;
  }

  .rst-content ul,
  .rst-content ol {
    margin: 0 0 0.8em 1.5em;
    padding: 0;
  }

  .rst-content li {
    margin: 0.1em 0;
  }

  .rst-content h1,
  .rst-content h2,
  .rst-content h3,
  .rst-content h4 {
    page-break-after: avoid;
    page-break-inside: avoid;
  }

  .rst-content h1 {
    font-size: 18pt;
    margin: 0 0 0.8em 0;
  }

  .rst-content h2 {
    font-size: 14pt;
    margin: 1.2em 0 0.6em 0;
  }

  .rst-content h3 {
    font-size: 12pt;
    margin: 1em 0 0.4em 0;
  }

  .rst-content h4 {
    font-size: 11pt;
    margin: 0.8em 0 0.3em 0;
    font-weight: 600;
  }

  /* ---- Blocs de code ------------------------------------------------ */

  .rst-content pre {
    background: #f5f5f5;
    border: 0.5pt solid #dddddd;
    border-radius: 3px;
    padding: 6px 8px;
    font-size: 9pt;
    overflow: visible;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .rst-content code {
    font-size: 9pt;
  }

  /* ---- Tables ------------------------------------------------------- */

  .rst-content table.docutils,
  .rst-content table {
    border-collapse: collapse;
    width: 100%;
    font-size: 10pt;
  }

  .rst-content table.docutils th,
  .rst-content table.docutils td,
  .rst-content table th,
  .rst-content table td {
    border: 0.5pt solid #cccccc;
    padding: 4px 6px;
    vertical-align: top;
  }

  .rst-content table.docutils th,
  .rst-content table th {
    background: #f0f0f0;
    font-weight: 600;
  }

  /* ---- Admonitions (notes, avertissements) -------------------------- */

  .rst-content .admonition {
    border-left: 3px solid #2563eb;
    background: #f5f7ff;
    padding: 6px 8px;
    margin: 0 0 0.8em 0;
    page-break-inside: avoid;
  }

  .rst-content .admonition.warning,
  .rst-content .admonition.attention {
    border-left-color: #b91c1c;
    background: #fef2f2;
  }

  .rst-content .admonition-title {
    font-weight: 600;
    margin-bottom: 0.2em;
  }

  /* ---- Zones de réponse (textarea) --------------------------------- */

  .answer-block textarea,
  .tardis-textarea,
  .tardis-answer-area {
    display: block;
    width: 100%;
    min-height: 5rem;
    border: 0.5pt solid #bbbbbb;
    border-radius: 2px;
    padding: 4px;
    font-size: 10pt;
    font-family: inherit;
    box-sizing: border-box;
  }

  .answer-block {
    margin: 0.6em 0 0.9em 0;
  }

  /* ---- QCM TARDIS --------------------------------------------------- */

  .tardis-qcm {
    margin: 0.6em 0 0.9em 0;
    padding: 4px 6px;
    border: 0.5pt solid #dddddd;
    border-radius: 2px;
  }

  .tardis-qcm-question {
    font-weight: 600;
    margin-bottom: 0.3em;
  }

  .tardis-qcm-choices li {
    list-style-type: none;
    margin: 0.1em 0;
  }

  .tardis-qcm-choices input[type="checkbox"],
  .tardis-qcm-choices input[type="radio"] {
    margin-right: 4px;
  }

  /* ---- Masquer les contrôles web-only ------------------------------- */

  .monaco-mount,
  .CodeMirror,
  #export-answers,
  .tardis-toolbar,
  .theme-toggle,
  .header .theme-switch,
  .wy-side-nav-search,
  .skip-link {
    display: none !important;
  }

  /* ---- Liens: URL explicites --------------------------------------- */

  a[href^="http"]::after {
    content: " (" attr(href) ")";
    font-size: 0.85em;
  }

  /* ---- Utilitaires -------------------------------------------------- */

  .print-hide {
    display: none !important;
  }

  .print-show {
    display: block !important;
  }

  /* Forcer une rupture de page si besoin */
  .page-break {
    page-break-before: always;
  }
}
